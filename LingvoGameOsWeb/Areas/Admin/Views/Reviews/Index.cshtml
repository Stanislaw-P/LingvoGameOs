@model List<Review>

@{
    ViewData["Title"] = "Панель-отзывы";
}

@section Styles {

    <link rel="stylesheet" href="/css/admin/admin-panel.css">
    <link rel="stylesheet" href="/css/admin/admin-reviews.css">
}

<!-- Admin Panel Header -->
<div class="admin-header">
    <div class="admin-header__container">
        <div class="admin-header__logo">
            <img src="/img/logo/logo_3.1.svg" alt="Рудзынг" class="admin-header__logo-img">
            <span class="admin-header__title">Панель-отзывов</span>
        </div>
        <div class="admin-header__user">
            <span class="admin-header__user-name">@ViewBag.AdminName</span>
            <span class="admin-header__user-role">Администратор</span>
        </div>
    </div>
</div>

<!-- Admin Dashboard -->
<div class="admin-dashboard">
    <!-- Statistics Cards -->
    <div class="admin-stats">
        <div class="admin-stats__card">
            <div class="admin-stats__icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10,9 9,9 8,9"></polyline>
                </svg>
            </div>
            <div class="admin-stats__content">
                <span class="admin-stats__value">@ViewBag.ApprovedReviewsCount</span>
                <span class="admin-stats__label">Отзывов на платформе</span>
            </div>
        </div>
        <div class="admin-stats__card">
            <div class="admin-stats__icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                </svg>
            </div>
            <div class="admin-stats__content">
                <span class="admin-stats__value">@ViewBag.NotApprovedReviewsCount</span>
                <span class="admin-stats__label">Отзывов на модерации</span>
            </div>
        </div>
        <div class="admin-stats__card">
            <div class="admin-stats__icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
            <div class="admin-stats__content">
                <span class="admin-stats__value">@ViewBag.UsersCount</span>
                <span class="admin-stats__label">Пользователей на платформе</span>
            </div>
        </div>
    </div>

    <!--Блок с отзывами-->
    <div class="admin-reviews">
        <h2>Управление отзывами</h2>

        <div class="admin-reviews__filters">
            <button class="btn--filter active" data-filter="all">Все</button>
            <button class="btn--filter" data-filter="published">Опубликованные</button>
            <button class="btn--filter" data-filter="pending">На модерации</button>
        </div>

        <div class="admin-reviews__list">
            @foreach (var review in Model)
            {
                <article class="admin-review @(review.IsApproved ? "published" : "pending")" data-review-id="@review.Id">
                    <div class="admin-review__header">
                        <div class="admin-review__user-info">
                            <img src="@review.Author.AvatarImgPath" alt="Avatar" class="admin-review__avatar">
                            <div class="admin-review__user-details">
                                <span class="admin-review__name">@review.Author.Name</span>
                                <span class="admin-review__game">@review.Game?.Title</span>
                            </div>
                        </div>

                        <!-- Оценка справа от всей информации пользователя и игры -->
                        <div class="admin-review__rating">
                            <span class="admin-review__rating-score">@review.Rating</span>
                            <img src="/icon/star-filled.svg" alt="Star" class="admin-review__star">
                        </div>
                    </div>

                    <div class="admin-review__content">
                        <p class="admin-review__text">@review.Text</p>
                        <div class="admin-review__date">
                            @review.PublicationDate.ToString("dd.MM.yyyy")
                        </div>
                    </div>

                    <div class="admin-review__footer">
                        <span class="review-status @(review.IsApproved ? "status-published" : "status-pending")">
                            @(review.IsApproved ? "Опубликовано" : "На модерации")
                        </span>
                        <div class="admin-review__actions">
                            @if (!review.IsApproved)
                            {
                                <button type="button" class="btn btn--success">
                                    Опубликовать
                                </button>
                            }
                            <button type="button" class="btn btn--danger">
                                Удалить
                            </button>
                        </div>
                    </div>
                </article>
            }
        </div>
    </div>
</div>

@section Scripts {
    <script type="module" src="/js/admin/admin-panel.js"></script>
    <script type="module" src="/js/admin/admin-reviews.js"></script>
}